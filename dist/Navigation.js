class Navigation{constructor({menuId:e="main-menu",fontFamily:t="Font Awesome 5 Free",chevronDown:n="\\f078",chevronUp:s="\\f077",click:a=!1}={}){this.chevronDown=n,this.chevronUp=s,this.fontFamilies=["FontAwesome","Font Awesome 5 Free","Glyphicons Halflings"],this.fontFamily=t,this.hasNestedSubmenu=!1,this.menu=null,this.menuId=e,this.click=a}clickHandler(e){let{target:t}=e,n=null;"span"==t.localName&&(t=t.parentElement),null===t.nextSibling||"ul"!==t.nextSibling.localName?(console.log("not a ul"),n=document.getElementsByClassName("submenu-list-open")):n=t.nextSibling,console.log(t.nextSibling),n.getElementsByTagName("ul").length?this.hasNestedSubmenu=!0:this.hasNestedSubmenu=!1,t.getAttribute("aria-haspopup")&&(t.classList.contains("submenu-toggle")&&e.preventDefault(),n.classList.toggle("submenu-list-open"),t.setAttribute("aria-expanded","true"),!n.classList.contains("submenu-list-open")&&t.setAttribute("aria-expanded","false"))}focusInHandler(e){const{target:t}=e,{offsetParent:{parentNode:n}}=t;if(n===this.menu||!n.contains(t)){const e=n.querySelectorAll('[aria-expanded="true"]');n.getElementsByClassName("submenu-list-open");e.length}}keyDownHandler(e){const{keyCode:t,target:n}=e,s=document.querySelectorAll('[aria-expanded="true"]')[0],a=document.getElementsByClassName("submenu-list-open")[0];console.log(a),27===t&&a&&(s.setAttribute("aria-expanded","false"),a.classList.remove("submenu-list-open"))}hoverHandler(e){const{type:t,target:n}=e;"mouseout"===t&&"true"===n.getAttribute("aria-haspopup")?n.setAttribute("aria-expanded","false"):"mouseover"===t&&"false"===n.getAttribute("aria-haspopup")&&n.setAttribute("aria-expanded","true")}eventDispatcher(e){switch(e.type){case"click":this.clickHandler(e);break;case"focusin":this.focusInHandler(e);break;case"keydown":this.keyDownHandler(e);break;case"mouseover":case"mouseout":this.hoverHandler(e);break;default:return}}setEventListeners(){Array.prototype.slice.call(this.menu.getElementsByClassName("no-js")).forEach(e=>{e.classList.remove("no-js")});let e=["focusin","keydown","mouseover"];this.click?e.push("click"):e.push("mouseout");for(let t=0;t<e.length;t++)document.addEventListener(e[t],e=>{this.eventDispatcher(e)})}setSubmenuIcon(){let e=this.fontFamily;this.fontFamilies.includes(e)||(e="");const t=this.menu.querySelectorAll(".submenu-icon"),n=`\n      nav ul li span::before {\n        content: '${this.chevronDown}';\n        font-family: '${e}';\n        font-weight: bold;\n      }\n      nav ul.click-menu li > button[aria-expanded="true"] span::before,\n      nav ul:not(.click-menu) li:hover > button span::before,\n      nav ul li:focus > button span::before { \n        content: '${this.chevronUp}';\n        font-family: '${e}'; \n        font-weight: bold;\n      }`,s=document.createElement("style");s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(s),t.forEach(e=>{e.setAttribute("data-before",this.chevronDown)})}init(){this.menu=document.getElementById(this.menuId),this.setEventListeners(),this.setSubmenuIcon()}}
//# sourceMappingURL=Navigation.js.map
