"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Navigation=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.menuId,a=void 0===n?"main-menu":n,s=t.fontFamily,o=void 0===s?"Font Awesome 5 Free":s,i=t.chevronDown,l=void 0===i?"\\f078":i,u=t.chevronUp,r=void 0===u?"\\f077":u,c=t.click,m=void 0!==c&&c;_classCallCheck(this,e),this.chevronDown=l,this.chevronUp=r,this.fontFamilies=["FontAwesome","Font Awesome 5 Free","Glyphicons Halflings"],this.fontFamily=o,this.hasNestedSubmenu=!1,this.menu=null,this.menuId=a,this.click=m}return _createClass(e,[{key:"clickHandler",value:function(e){var t=e.target,n=null;"span"==t.localName&&(t=t.parentElement),null===t.nextSibling||"ul"!==t.nextSibling.localName?(console.log("not a ul"),n=document.getElementsByClassName("submenu-list-open")):n=t.nextSibling,console.log(t.nextSibling),n.getElementsByTagName("ul").length?this.hasNestedSubmenu=!0:this.hasNestedSubmenu=!1,t.getAttribute("aria-haspopup")&&(t.classList.contains("submenu-toggle")&&e.preventDefault(),n.classList.toggle("submenu-list-open"),t.setAttribute("aria-expanded","true"),!n.classList.contains("submenu-list-open")&&t.setAttribute("aria-expanded","false"))}},{key:"focusInHandler",value:function(e){var t=e.target,n=t.offsetParent.parentNode;if(n===this.menu||!n.contains(t)){var a=n.querySelectorAll('[aria-expanded="true"]');n.getElementsByClassName("submenu-list-open");a.length}}},{key:"keyDownHandler",value:function(e){var t=e.keyCode,n=(e.target,document.querySelectorAll('[aria-expanded="true"]')[0]),a=document.getElementsByClassName("submenu-list-open")[0];console.log(a),27===t&&a&&(n.setAttribute("aria-expanded","false"),a.classList.remove("submenu-list-open"))}},{key:"hoverHandler",value:function(e){var t=e.type,n=e.target;"mouseout"===t&&"true"===n.getAttribute("aria-haspopup")?n.setAttribute("aria-expanded","false"):"mouseover"===t&&"false"===n.getAttribute("aria-haspopup")&&n.setAttribute("aria-expanded","true")}},{key:"eventDispatcher",value:function(e){switch(e.type){case"click":this.clickHandler(e);break;case"focusin":this.focusInHandler(e);break;case"keydown":this.keyDownHandler(e);break;case"mouseover":case"mouseout":this.hoverHandler(e);break;default:return}}},{key:"setEventListeners",value:function(){var e=this;Array.prototype.slice.call(this.menu.getElementsByClassName("no-js")).forEach(function(e){e.classList.remove("no-js")});var t=["focusin","keydown","mouseover"];this.click?t.push("click"):t.push("mouseout");for(var n=0;n<t.length;n++)document.addEventListener(t[n],function(t){e.eventDispatcher(t)})}},{key:"setSubmenuIcon",value:function(){var e=this,t=this.fontFamily;this.fontFamilies.includes(t)||(t="");var n=this.menu.querySelectorAll(".submenu-icon"),a="\n      nav ul li span::before {\n        content: '"+this.chevronDown+"';\n        font-family: '"+t+"';\n        font-weight: bold;\n      }\n      nav ul.click-menu li > button[aria-expanded=\"true\"] span::before,\n      nav ul:not(.click-menu) li:hover > button span::before,\n      nav ul li:focus > button span::before { \n        content: '"+this.chevronUp+"';\n        font-family: '"+t+"'; \n        font-weight: bold;\n      }",s=document.createElement("style");s.styleSheet?s.styleSheet.cssText=a:s.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(s),n.forEach(function(t){t.setAttribute("data-before",e.chevronDown)})}},{key:"init",value:function(){this.menu=document.getElementById(this.menuId),this.setEventListeners(),this.setSubmenuIcon()}}]),e}();
//# sourceMappingURL=Navigation.js.map
