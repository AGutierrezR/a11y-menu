"use strict";var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Navigation=function(){function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.menuId,n=void 0===t?"main-menu":t,a=e.fontFamily,s=void 0===a?"Font Awesome 5 Free":a,i=e.chevronDown,o=void 0===i?"\\f078":i,r=e.chevronUp,u=void 0===r?"\\f077":r;_classCallCheck(this,l),this.chevronDown=o,this.chevronUp=u,this.fontFamilies=["FontAwesome","Font Awesome 5 Free","Glyphicons Halflings"],this.fontFamily=s,this.hasNestedSubmenu=!1,this.menu=null,this.menuId=n}return _createClass(l,[{key:"chevronSwitcher",value:function(e){if("button"===e.localName){var t=e.children[0];"true"===e.getAttribute("aria-expanded")?t.setAttribute("data-before",this.chevronUp):t.setAttribute("data-before",this.chevronDown)}}},{key:"clickHandler",value:function(e){var t=e.target,n=t.nextSibling;n.getElementsByTagName("ul").length?this.hasNestedSubmenu=!0:this.hasNestedSubmenu=!1,t.getAttribute("aria-haspopup")&&("submenu-toggle"===t.className&&e.preventDefault(),n.classList.toggle("submenu-list-open"),t.setAttribute("aria-expanded","true"),!n.classList.contains("submenu-list-open")&&t.setAttribute("aria-expanded","false"),t.children&&this.chevronSwitcher(t))}},{key:"focusInHandler",value:function(e){var t=e.target,n=(e.relatedTarget,t.parentNode,t.offsetParent.parentNode);if(n===this.menu||!n.contains(t)){var a=n.querySelectorAll('[aria-expanded="true"]'),s=n.getElementsByClassName("submenu-list-open");a.length&&(a[0].setAttribute("aria-expanded","false"),s[0].classList.remove("submenu-list-open"),this.chevronSwitcher(a[0]))}}},{key:"hoverHandler",value:function(e){var t=e.type,n=e.target;"mouseout"===t&&"true"===n.getAttribute("aria-haspopup")?n.setAttribute("aria-expanded","false"):"mouseover"===t&&"false"===n.getAttribute("aria-haspopup")&&n.setAttribute("aria-expanded","true"),0<n.children.length&&this.chevronSwitcher(n)}},{key:"eventDispatcher",value:function(e){switch(e.type){case"click":this.clickHandler(e);break;case"focusin":this.focusInHandler(e);break;case"mouseover":case"mouseout":this.hoverHandler(e);break;default:return}}},{key:"setEventListeners",value:function(){var t=this;Array.prototype.slice.call(this.menu.getElementsByClassName("no-js")).forEach(function(e){e.classList.remove("no-js")});for(var e=["click","focusin","mouseout","mouseover"],n=0;n<e.length;n++)this.menu.addEventListener(e[n],function(e){t.eventDispatcher(e)})}},{key:"setSubmenuIcon",value:function(){var t=this,e=this.fontFamily;this.fontFamilies.includes(e)||(e="");var n=this.menu.querySelectorAll(".submenu-icon"),a="\n      nav ul li span::before {\n        content: '"+this.chevronDown+"';\n        font-family: '"+e+"';\n        font-weight: bold;\n      }\n      nav ul li:hover > button span::before,\n      nav ul li:focus > button span::before { \n        content: '"+this.chevronUp+"';\n        font-family: '"+e+"'; \n        font-weight: bold;\n      }",s=document.createElement("style");s.styleSheet?s.styleSheet.cssText=a:s.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(s),n.forEach(function(e){e.setAttribute("data-before",t.chevronDown)})}},{key:"init",value:function(){this.menu=document.getElementById(this.menuId),this.setEventListeners(),this.setSubmenuIcon()}}]),l}();module.exports=Navigation;
//# sourceMappingURL=Navigation.js.map
